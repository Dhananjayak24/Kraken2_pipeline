#We can either build our own customized database or download using wget
#Building customized database
#Downloading taxonomy file
kraken2-build --download-taxonomy --db <db_name>

#This will download the accession number to taxon maps, as well as the taxonomic name and tree information from NCBI.
#NOTE: No need to download seperate accession number to taxon maps except for plasmid and nonredundant proteins.

#You can download only required phylum
kraken2-build --download-library fungi db --fungi --threads 8
kraken2-build --download-library archaea db --archaea --threads 8
kraken2-build --download-library viral db --viral --threads 8
kraken2-build --download-library bacteria db --bacteria --threads 8
kraken2-build --download-library human db --human --threads 8

#Install one or more reference libraries. Several sets of standard genomes/proteins are made easily available through kraken2-build:
#archaea: RefSeq complete archaeal genomes/proteins
#bacteria: RefSeq complete bacterial genomes/proteins
#plasmid: RefSeq plasmid nucleotide/protein sequences
#viral: RefSeq complete viral genomes/proteins
#human: GRCh38 human genome/proteins
#fungi: RefSeq complete fungal genomes/proteins
#plant: RefSeq complete plant genomes/proteins
#protozoa: RefSeq complete protozoan genomes/proteins
#nr: NCBI non-redundant protein database
#nt: NCBI non-redundant nucleotide database
#UniVec: NCBI-supplied database of vector, adapter, linker, and primer sequences that may be contaminating sequencing projects and/or assemblies
#UniVec_Core: A subset of UniVec chosen to minimize false positive hits to the vector database
#Note that downloading nr requires use of the --protein option, and that UniVec and UniVec_Core are incompatible with the --protein option

#We can also add genomes or sequences in FASTA format in below file format
>sequence16|kraken:taxid|<taxon ID>  Adapter sequence
CAAGCAGAAGACGGCATACGAGATCTTCGAGTGACTGGAGTTCCTTGGCACCCGAGAATTCCA
#Then use below code to add it to database
kraken2-build --add-to-library chr1.fa --db <database_name>
kraken2-build --add-to-library chr2.fa --db <database_name>

#PLEASE NOTE DATABASE OF KRAKEN1 CANNOT BE USED WITH KRAKEN2
#ALSO IF CUSTOMIZING DATABASE WE NEED TO KEEP FILES IN SPECIFIC ORDER
#Use multi threading and nohup to avoid circumstances where the server gets disconneted

#Building database
kraken2-build --build --db <database_name>

#After successfully building database we can remove intermediate files from memory using --clean in kraken2-build


######################################################STANDARD DATABASE##################
# Creating database using standard procedure
nohup kraken2-build --standard --threads 12 --db <db_name>
#Please check available threads in the server before running command by using 'htop' command
#you can check the progress using 'cat nohup.out' which keeps log of progress
